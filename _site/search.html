<<<<<<< Updated upstream
---
layout: default
title: Search Results
---

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="font-weight-bold mb-4">Search Results</h1>
            
            <div class="search-box mb-5">
                <form action="{{ site.baseurl }}/search" method="get">
                    <div class="input-group">
                        <input type="text" class="form-control" id="search-input" name="q" placeholder="Search for..." value="{{ page.url | split: '=' | last | replace: '%20', ' ' | strip }}" required>
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            
            <div id="search-results" class="search-results">
                <!-- Results will be displayed here -->
                <div class="text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <p>Searching...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Simple Jekyll Search -->
<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get query parameter
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            
            if (pair[0] === variable) {
                return decodeURIComponent(pair[1].replace(/\+/g, '%20'));
            }
        }
    }
    
    var searchQuery = getQueryVariable('q');
    var searchBox = document.getElementById('search-input');
    var searchResults = document.getElementById('search-results');
    
    if (searchQuery) {
        searchBox.setAttribute("value", searchQuery);
        
        // Initialize Simple Jekyll Search
        SimpleJekyllSearch({
            searchInput: document.getElementById('search-input'),
            resultsContainer: document.getElementById('search-results'),
            searchResultTemplate: `
                <div class="card mb-4">
                    <div class="card-body">
                        <h3 class="card-title"><a href="{url}">{title}</a></h3>
                        <div class="card-text">{snippet}</div>
                        <p class="card-text mt-2">
                            <small class="text-muted">
                                <i class="far fa-calendar-alt"></i> {date} | 
                                <i class="far fa-folder-open"></i> {categories}
                            </small>
                        </p>
                    </div>
                </div>
            `,
            templateMiddleware: function(prop, value, template) {
                if (prop === 'categories') {
                    return value.join(', ');
                }
                if (prop === 'snippet') {
                    var content = value || '';
                    var searchTerm = searchQuery.toLowerCase();
                    var position = content.toLowerCase().indexOf(searchTerm);
                    
                    if (position !== -1) {
                        var start = Math.max(0, position - 50);
                        var end = Math.min(content.length, position + searchTerm.length + 50);
                        var snippet = content.substring(start, end);
                        
                        if (start > 0) {
                            snippet = '...' + snippet;
                        }
                        
                        if (end < content.length) {
                            snippet = snippet + '...';
                        }
                        
                        // Highlight the search term
                        var regex = new RegExp('(' + searchTerm + ')', 'gi');
                        return snippet.replace(regex, '<mark>$1</mark>');
                    } else {
                        // If the search term is not found in the content, return the first 100 chars
                        return content.substring(0, 100) + (content.length > 100 ? '...' : '');
                    }
                }
                return value;
            },
            noResultsText: `
                <div class="alert alert-info">
                    <p class="mb-0">No results found for <strong>${searchQuery}</strong></p>
                </div>
            `,
            json: '/search.json',
            fuzzy: false
        });
    }
});
=======
---
layout: default
title: Search Results
---

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="font-weight-bold mb-4">Search Results</h1>
            
            <div class="search-box mb-5">
                <form action="{{ site.baseurl }}/search" method="get">
                    <div class="input-group">
                        <input type="text" class="form-control" id="search-input" name="q" placeholder="Search for..." value="{{ page.url | split: '=' | last | replace: '%20', ' ' | strip }}" required>
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            
            <div id="search-results" class="search-results">
                <!-- Results will be displayed here -->
                <div class="text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <p>Searching...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Simple Jekyll Search -->
<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get query parameter
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            
            if (pair[0] === variable) {
                return decodeURIComponent(pair[1].replace(/\+/g, '%20'));
            }
        }
    }
    
    var searchQuery = getQueryVariable('q');
    var searchBox = document.getElementById('search-input');
    var searchResults = document.getElementById('search-results');
    
    if (searchQuery) {
        searchBox.setAttribute("value", searchQuery);
        
        // Initialize Simple Jekyll Search
        SimpleJekyllSearch({
            searchInput: document.getElementById('search-input'),
            resultsContainer: document.getElementById('search-results'),
            searchResultTemplate: `
                <div class="card mb-4">
                    <div class="card-body">
                        <h3 class="card-title"><a href="{url}">{title}</a></h3>
                        <div class="card-text">{snippet}</div>
                        <p class="card-text mt-2">
                            <small class="text-muted">
                                <i class="far fa-calendar-alt"></i> {date} | 
                                <i class="far fa-folder-open"></i> {categories}
                            </small>
                        </p>
                    </div>
                </div>
            `,
            templateMiddleware: function(prop, value, template) {
                if (prop === 'categories') {
                    return value.join(', ');
                }
                if (prop === 'snippet') {
                    var content = value || '';
                    var searchTerm = searchQuery.toLowerCase();
                    var position = content.toLowerCase().indexOf(searchTerm);
                    
                    if (position !== -1) {
                        var start = Math.max(0, position - 50);
                        var end = Math.min(content.length, position + searchTerm.length + 50);
                        var snippet = content.substring(start, end);
                        
                        if (start > 0) {
                            snippet = '...' + snippet;
                        }
                        
                        if (end < content.length) {
                            snippet = snippet + '...';
                        }
                        
                        // Highlight the search term
                        var regex = new RegExp('(' + searchTerm + ')', 'gi');
                        return snippet.replace(regex, '<mark>$1</mark>');
                    } else {
                        // If the search term is not found in the content, return the first 100 chars
                        return content.substring(0, 100) + (content.length > 100 ? '...' : '');
                    }
                }
                return value;
            },
            noResultsText: `
                <div class="alert alert-info">
                    <p class="mb-0">No results found for <strong>${searchQuery}</strong></p>
                </div>
            `,
            json: '/search.json',
            fuzzy: false
        });
    }
});
>>>>>>> Stashed changes
</script> 